<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gd.dao.BtocAreaItemDao">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.gd.model.BtocAreaItem">
        <id column="id" property="id" />
        <result column="itemId" property="itemId" />
        <result column="recommendPrice" property="recommendPrice" />
        <result column="originalPrice" property="originalPrice" />
        <result column="bid" property="bid" />
        <result column="avgPrice" property="avgPrice" />
        <result column="avgPriceWithoutTax" property="avgPriceWithoutTax" />
        <result column="status" property="status" />
        <result column="saleArea" property="saleArea" />
        <result column="saleType" property="saleType" />
        <result column="price" property="price" />
        <result column="gift" property="gift" />
        <result column="interceptCount" property="interceptCount" />
        <result column="limitCount" property="limitCount" />
        <result column="showPic" property="showPic" />
        <result column="littlePic" property="littlePic" />
        <result column="inputer" property="inputer" />
        <result column="inputDate" property="inputDate" />
        <result column="updater" property="updater" />
        <result column="updateTime" property="updateTime" />
        <result column="mobilePrice" property="mobilePrice" />
        <result column="mobilePriceStatus" property="mobilePriceStatus" />
        <result column="xPrice" property="xPrice" />
        <result column="giftLinkTxt" property="giftLinkTxt" />
        <result column="pcGitLink" property="pcGitLink" />
        <result column="h5GitLink" property="h5GitLink" />
        <result column="syncItemStatus" property="syncItemStatus" />
        <result column="syncTime" property="syncTime" />
    </resultMap>

    <!-- 通用查询映射结果 -->
    <resultMap id="ProductVo" type="com.gd.model.ProductVo">
        <result column="itemId" property="itemId"/>
        <result column="productNo" property="productNo"/>
        <result column="productName" property="productName"/>
        <result column="originalPrice" property="originalPrice"/>
        <result column="skuId" property="skuId"/>
        <result column="norms" property="norms"/>
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id AS id, itemId AS itemId, recommendPrice AS recommendPrice, originalPrice AS originalPrice, bid AS bid, avgPrice AS avgPrice, avgPriceWithoutTax AS avgPriceWithoutTax, status AS status, saleArea AS saleArea, saleType AS saleType, price AS price, gift AS gift, interceptCount AS interceptCount, limitCount AS limitCount, showPic AS showPic, littlePic AS littlePic, inputer AS inputer, inputDate AS inputDate, updater AS updater, updateTime AS updateTime, mobilePrice AS mobilePrice, mobilePriceStatus AS mobilePriceStatus, xPrice AS xPrice, giftLinkTxt AS giftLinkTxt, pcGitLink AS pcGitLink, h5GitLink AS h5GitLink, syncItemStatus AS syncItemStatus, syncTime AS syncTime
    </sql>

    <sql id="queryProductVoList">
       i.id AS itemId, i.productNo AS productNo , i.productName AS productName,a.originalPrice AS originalPrice ,i.skuId AS skuId,s.norms AS norms
    </sql>

    <select id="queryProductForVo" resultMap="ProductVo" parameterType="java.lang.String">
        select <include refid="queryProductVoList" />
        from btoc_item i
        inner join btoc_area_item a on i.id = a.itemId
        left join btoc_sku s on i.skuId = s.id
        where 1=1
        <if test="productName != null  ">
            and  i.productName like CONCAT('%',upper(trim(#{productName})),'%')
        </if>
       and  i.status = 1 and i.sellType not in (9,10) and i.materialtype = 'ZSP'
        order by i.updateTime desc
    </select>

</mapper>
